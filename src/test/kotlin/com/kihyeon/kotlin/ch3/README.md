# ch3. 함수로 프로그래밍하기

- 순수함수
  - 내부에 아무 효과가 없어서 오로지 인자에 의해서만 반환 값이 결정
- 안전한 프로그램을 작성하려면
  - 계산 시 순수 함수만 사용한다
  - 계산 결과를 외부 세계에서 사용하려면 순수 효과만 사용한다
- 함수형 프로그래밍
  - 효과를 다른 방식으로 다루는 프로그래밍 패러다임
  - 모든 것이 함수. 값, 함수, 효과.
- 함수형 프로그래머
  - 효과를 적용하는 대신에 아직 평가되지 않은 형태로 의도한 효과를 표현하는 데이터를 반환하는 함수 사용한다

## 3-1. 함수란 무엇인가
- 모든 원소는 자신에 대응하는 원소가 공역에 꼭 하나 있어야 한다 (0개도 아니고 2개도 아니고)
 
### 3-1-5. 인자를 여럿 받는 함수 사용하기
- N x N 은 모든 정수 쌍의 집합이다
- 이 집합의 원소는 정수의 쌍이고, 쌍은 여러 원소의 조합을 표현할 때 사용하는 튜플(tuple) 이라는 개념의 특별한 경우다. 쌍(pair) 은 원소가 두 개인 튜플이다
  - f((3, 5)) = 3 + 5 = 8
  - f(3, 5) = 3 + 5 = 8
  - 이렇게 썼다고 해도 이 함수는 튜플을 인자로 받는 함수지 인자가 두 개 있는 함수가 아니다

### 3-1-6. 커리한 함수
- f(x)(y) = x + y
- f(x) = g
- g(y) = x + y
- f(3)(5) = g(5) = 3 + 5 = 8
- f(x)(y) 를 f(x, y) 의 커리한 형태라고 한다
- 커링: 튜플에 대한 함수에 대해 이런 식의 변환을 적용해서 함수를 반환하는 함수로 바꾸는 과정

### 3-1-7. 부분 적용 함수 사용하기
- f(rate, price) = price / 100 * (100 + rate)
- g(price, rate) = price / 100 * (100 + rate)
- 커링
  - f(rate)(price)
  - g(price)(rate)

### 3-1-8. 효과가 없는 함수
- 순수 함수는 값을 반환하기만 하고 다른 일은 하지 않는다
- 외부 세계의 어떤 요소도 변이시키지 않고, 인자도 변이시키지 않으며, 오류가 발생해도 폭발하지 않는다
- 하지만, 예외나 그와 비슷한 어떤 값도 반환할 수 있다
  - 이때 예외 등을 값으로 반환해야 하며, 로그로 남기거나 화면에 출력하거나 호출 스택을 거슬러 올라가면서 던져서는 안 된다

## 3-2. 코틀린 함수

### 3-2-4. 코틀린 fun 함수 사용하기
#### 어떤 함수나 메서드가 순수 함수가 되기 위해 필요한 조건
- 함수 외부의 어떤 것도 변이시켜서는 안 된다. 내부에서 상태를 변이시키더라도 그 상태를 외부에서 관찰할 수 없어야 한다
- 인자를 변이시켜서는 안 된다
- 예외나 오류를 던져서는 안 된다
- 항상 값을 반환해야 한다
- 인자가 같으면 항상 같은 결과를 내놓아야 한다

### 3-2-6. 함수 값 사용하기
- 함수가 값이라면 굳이 fun 을 사용해 함수를 정의해야 하는 이유가 무엇일까 ?
- 왜 fun 함수를 사용해야 할까?
  - fun 함수가 더 효율적이기 때문이다. 이를 최적화로 볼 수 있다
  - 인자를 넘기고 그 인자에 따른 반환 값을 얻는 일만 하는 경우에는 fun 으로 정의한 함수를 사용하라
  - 함수를 데이터처럼 취급해야 하거나, 함수에서 함수를 돌려줘야 하는 경우이거나 변수, 맵 그 밖의 데이터 구조에 함수를 저장해야하는 경우라면 함수 타입의 식을 사용하라

## 3-3. 고급 함수 기능
 

## 요약
- 함수는 소스 집합과 타깃 집합 사이의 대응 관계다
- 타입을 활용하면 컴파일러에서 타입 오류를 탐지할 수 있어 프로그램을 보다 안전하게 만들 수 있다
